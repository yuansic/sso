define("arale-autocomplete/1.4.1/autocomplete",["jquery","arale-overlay/1.2.0/overlay","position/1.1.0/index","arale-iframe-shim/1.1.0/index","arale-widget/1.2.0/widget","arale-base/1.2.0/base","arale-class/1.2.0/class","arale-events/1.2.0/events","arale-templatable/0.10.0/src/templatable","handlebars/1.3.0/dist/cjs/handlebars","handlebars-runtime/1.3.0/dist/cjs/handlebars.runtime"],function(e,t,i){i.exports=e("arale-autocomplete/1.4.1/src/autocomplete")}),define("arale-autocomplete/1.4.1/src/autocomplete",["jquery","arale-overlay/1.2.0/overlay","position/1.1.0/index","arale-iframe-shim/1.1.0/index","arale-widget/1.2.0/widget","arale-base/1.2.0/base","arale-class/1.2.0/class","arale-events/1.2.0/events","arale-templatable/0.10.0/src/templatable","handlebars/1.3.0/dist/cjs/handlebars","handlebars-runtime/1.3.0/dist/cjs/handlebars.runtime"],function(e,t,i){function a(e){return"[object String]"===Object.prototype.toString.call(e)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e,t){if(e){if(u.isFunction(e))return e.call(this,t);if(!u.isArray(t)&&a(e)){for(var i=e.split("."),s=t;i.length;){var n=i.shift();if(!s[n])break;s=s[n]}return s}}return t}function r(e){var t=[];return u.each(e,function(e,i){if(a(i))t.push({label:i,value:i,alias:[]});else if(s(i)){if(!i.value&&!i.label)return;i.value||(i.value=i.label),i.label||(i.label=i.value),i.alias||(i.alias=[]),t.push(i)}}),t}function l(e,t){return a(e)?e=p[e]?p[e]:p["default"]:u.isFunction(e)||(e="url"===t.get("type")?p["default"]:p.startsWith),e}function h(e){function t(e){for(var t in e)i[t]=e[t]}var i={};return t(this),t(e.hash),e.fn(i)}function o(e){var t=this.highlightIndex,i=this.parent?this.parent.classPrefix:"",a=0,s=e||this.label||"",n="";if(u.isArray(t)){for(var r=0,l=t.length;l>r;r++){var h,o,c=t[r];if(u.isArray(c)?(h=c[0],o=c[1]-c[0]):(h=c,o=1),h>a&&(n+=s.substring(a,h)),h<s.length){var d=i?'class="'+i+'-item-hl"':"";n+="<span "+d+">"+s.substr(h,o)+"</span>"}if(a=h+o,a>=s.length)break}return s.length>a&&(n+=s.substring(a,s.length)),n}return s}var u=e("jquery"),c=e("arale-overlay/1.2.0/overlay"),d=e("arale-templatable/0.10.0/src/templatable"),f=e("arale-autocomplete/1.4.1/src/data-source"),p=e("arale-autocomplete/1.4.1/src/filter"),g=e("arale-autocomplete/1.4.1/src/input"),m=/\bMSIE [678]\.0\b/.test(navigator.userAgent),v=e("arale-autocomplete/1.4.1/src/autocomplete.handlebars"),b=c.extend({Implements:d,attrs:{trigger:null,classPrefix:"ui-select",align:{baseXY:[0,"100%"]},submitOnEnter:!0,dataSource:{value:[],getter:function(e){var t=this;return u.isFunction(e)?function(){return e.apply(t,arguments)}:e}},locator:"data",filter:null,disabled:!1,selectFirst:!1,delay:100,model:{value:{items:[]},getter:function(e){return e.classPrefix||(e.classPrefix=this.get("classPrefix")),e}},template:v,footer:"",header:"",html:"{{{label}}}",selectedIndex:null,data:[]},events:{"mousedown [data-role=items]":"_handleMouseDown","click [data-role=item]":"_handleSelection","mouseenter [data-role=item]":"_handleMouseMove","mouseleave [data-role=item]":"_handleMouseMove"},templateHelpers:{highlightItem:o,include:h},parseElement:function(){var e=this;this.templatePartials||(this.templatePartials={}),u.each(["header","footer","html"],function(t,i){e.templatePartials[i]=e.get(i)}),b.superclass.parseElement.call(this)},setup:function(){b.superclass.setup.call(this),this._isOpen=!1,this._initInput(),this._initDataSource(),this._initFilter(),this._bindHandle(),this._blurHide([u(this.get("trigger"))]),this._tweakAlignDefaultValue(),this.on("indexChanged",function(e){var t=parseInt(this.get("height"),10);if(t){var i=this.items.parent().height()/this.items.length,a=Math.max(0,i*(e+1)-t);this.element.children().scrollTop(a)}})},show:function(){this._isOpen=!0,this._isEmpty()||b.superclass.show.call(this)},hide:function(){this._timeout&&clearTimeout(this._timeout),this.dataSource.abort(),this._hide()},destroy:function(){this._clear(),this.input&&(this.input.destroy(),this.input=null),b.superclass.destroy.call(this)},selectItem:function(e){this.items&&(e&&this.items.length>e&&e>=-1&&this.set("selectedIndex",e),this._handleSelection())},setInputValue:function(e){this.input.setValue(e)},_filterData:function(e){var t=this.get("filter"),i=this.get("locator");e=n(i,e),e=t.call(this,r(e),this.input.get("query")),this.set("data",e)},_onRenderData:function(e){e||(e=[]),this.set("model",{items:e,query:this.input.get("query"),length:e.length}),this.renderPartial(),this.items=this.$("[data-role=items]").children(),this.get("selectFirst")&&this.set("selectedIndex",0),this._isOpen&&this.show()},_onRenderSelectedIndex:function(e){var t=this.get("classPrefix")+"-item-hover";this.items&&this.items.removeClass(t),-1!==e&&(this.items.eq(e).addClass(t),this.trigger("indexChanged",e,this.lastIndex),this.lastIndex=e)},_initDataSource:function(){this.dataSource=new f({source:this.get("dataSource")})},_initInput:function(){this.input=new g({element:this.get("trigger"),delay:this.get("delay")})},_initFilter:function(){var e=this.get("filter");e=l(e,this.dataSource),this.set("filter",e)},_bindHandle:function(){this.dataSource.on("data",this._filterData,this),this.input.on("blur",this.hide,this).on("focus",this._handleFocus,this).on("keyEnter",this._handleSelection,this).on("keyEsc",this.hide,this).on("keyUp keyDown",this.show,this).on("keyUp keyDown",this._handleStep,this).on("queryChanged",this._clear,this).on("queryChanged",this._hide,this).on("queryChanged",this._handleQueryChange,this).on("queryChanged",this.show,this),this.after("hide",function(){this.set("selectedIndex",-1)}),this.on("itemSelected",function(){this._hide()})},_handleSelection:function(e){if(this.items){var t=e?"click"===e.type:!1,i=t?this.items.index(e.currentTarget):this.get("selectedIndex"),a=this.items.eq(i),s=this.get("data")[i];i>=0&&a&&s&&(this.input.setValue(s.label),this.set("selectedIndex",i,{silent:!0}),!e||t||this.get("submitOnEnter")||e.preventDefault(),this.trigger("itemSelected",s,a))}},_handleFocus:function(){this._isOpen=!0},_handleMouseMove:function(e){var t=this.get("classPrefix")+"-item-hover";if(this.items.removeClass(t),"mouseenter"===e.type){var i=this.items.index(e.currentTarget);this.set("selectedIndex",i,{silent:!0}),this.items.eq(i).addClass(t)}},_handleMouseDown:function(e){if(m){var t=this.input.get("element")[0];t.onbeforedeactivate=function(){window.event.returnValue=!1,t.onbeforedeactivate=null}}e.preventDefault()},_handleStep:function(e){e.preventDefault(),this.get("visible")&&this._step("keyUp"===e.type?-1:1)},_handleQueryChange:function(e){this.get("disabled")||(this.dataSource.abort(),this.dataSource.getData(e))},_step:function(e){var t=this.get("selectedIndex");-1===e?t>-1?this.set("selectedIndex",t-1):this.set("selectedIndex",this.items.length-1):1===e&&(t<this.items.length-1?this.set("selectedIndex",t+1):this.set("selectedIndex",-1))},_clear:function(){this.$("[data-role=items]").empty(),this.set("selectedIndex",-1),delete this.items,delete this.lastIndex},_hide:function(){this._isOpen=!1,b.superclass.hide.call(this)},_isEmpty:function(){var e=this.get("data");return!(e&&e.length>0)},_tweakAlignDefaultValue:function(){var e=this.get("align");e.baseElement=this.get("trigger"),this.set("align",e)}});i.exports=b}),define("arale-autocomplete/1.4.1/src/data-source",["arale-base/1.2.0/base","arale-class/1.2.0/class","arale-events/1.2.0/events","jquery"],function(e,t,i){function a(e){return"[object String]"===Object.prototype.toString.call(e)}function s(e){return e.replace(/^([a-z])/,function(e,t){return t.toUpperCase()})}var n=e("arale-base/1.2.0/base"),r=e("jquery"),l=n.extend({attrs:{source:null,type:"array"},initialize:function(e){l.superclass.initialize.call(this,e),this.id=0,this.callbacks=[];var t=this.get("source");if(a(t))this.set("type","url");else if(r.isArray(t))this.set("type","array");else if(r.isPlainObject(t))this.set("type","object");else{if(!r.isFunction(t))throw new Error("Source Type Error");this.set("type","function")}},getData:function(e){return this["_get"+s(this.get("type")||"")+"Data"](e)},abort:function(){this.callbacks=[]},_done:function(e){this.trigger("data",e)},_getUrlData:function(e){var t,i=this,a={query:e?encodeURIComponent(e):"",timestamp:(new Date).getTime()},s=this.get("source").replace(/\{\{(.*?)\}\}/g,function(e,t){return a[t]}),n="callback_"+this.id++;this.callbacks.push(n),t=/^(https?:\/\/)/.test(s)?{dataType:"jsonp"}:{dataType:"json"},r.ajax(s,t).success(function(e){r.inArray(n,i.callbacks)>-1&&(delete i.callbacks[n],i._done(e))}).error(function(){r.inArray(n,i.callbacks)>-1&&(delete i.callbacks[n],i._done({}))})},_getArrayData:function(){var e=this.get("source");return this._done(e),e},_getObjectData:function(){var e=this.get("source");return this._done(e),e},_getFunctionData:function(e){function t(e){i._done(e)}var i=this,a=this.get("source"),s=a.call(this,e,t);s&&this._done(s)}});i.exports=l}),define("arale-autocomplete/1.4.1/src/filter",["jquery"],function(e,t,i){function a(e){return(e||"").replace(l,"\\$1")}function s(e,t){for(var i=[],a=e.split(""),s=0,n=t.split(""),r=0,l=a.length;l>r;r++){var h=a[r];if(h===n[s]){if(s===n.length-1){i.push([r-n.length+1,r+1]),s=0;continue}s++}else s=0}return i}var n=e("jquery"),r={"default":function(e){return e},startsWith:function(e,t){t=t||"";var i=[],s=t.length,r=new RegExp("^"+a(t));return s?(n.each(e,function(e,t){for(var a,n=[t.value].concat(t.alias);a=n.shift();)if(r.test(a)){t.label===a&&(t.highlightIndex=[[0,s]]),i.push(t);break}}),i):[]},stringMatch:function(e,t){t=t||"";var i=[],a=t.length;return a?(n.each(e,function(e,a){for(var n,r=[a.value].concat(a.alias);n=r.shift();)if(n.indexOf(t)>-1){a.label===n&&(a.highlightIndex=s(n,t)),i.push(a);break}}),i):[]}};i.exports=r;var l=/(\[|\[|\]|\^|\$|\||\(|\)|\{|\}|\+|\*|\?|\\)/g}),define("arale-autocomplete/1.4.1/src/input",["jquery","arale-base/1.2.0/base","arale-class/1.2.0/class","arale-events/1.2.0/events"],function(e,t,i){function a(e,t){return function(){e.apply(t,arguments)}}function s(e,t){return e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e===t}function n(e){return e.charAt(0).toUpperCase()+e.substring(1)}var r=e("jquery"),l=e("arale-base/1.2.0/base"),h=/\bMSIE [6789]\.0\b/.test(navigator.userAgent),o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},u=l.extend({attrs:{element:{value:null,setter:function(e){return r(e)}},query:null,delay:100},initialize:function(){u.superclass.initialize.apply(this,arguments),this._bindEvents(),this.set("query",this.getValue())},focus:function(){this.get("element").focus()},getValue:function(){return this.get("element").val()},setValue:function(e,t){this.get("element").val(e),!t&&this._change()},destroy:function(){u.superclass.destroy.call(this)},_bindEvents:function(){var e,t=this.get("element");if(t.attr("autocomplete","off").on("focus.autocomplete",a(this._handleFocus,this)).on("blur.autocomplete",a(this._handleBlur,this)).on("keydown.autocomplete",a(this._handleKeydown,this)),h){var i=this,s=["keydown.autocomplete","keypress.autocomplete","cut.autocomplete","paste.autocomplete"].join(" ");t.on(s,a(function(t){o[t.which]||(clearTimeout(e),e=setTimeout(function(){i._change.call(i,t)},this.get("delay")))},this))}else t.on("input.autocomplete",a(this._change,this))},_change:function(){var e=this.getValue(),t=this.get("query"),i=s(t,e),a=i?e.length!==t.length:!1;a&&this.trigger("whitespaceChanged",t),i||(this.set("query",e),this.trigger("queryChanged",e,t))},_handleFocus:function(e){this.trigger("focus",e)},_handleBlur:function(e){this.trigger("blur",e)},_handleKeydown:function(e){var t=o[e.which];if(t){var i="key"+n(t);this.trigger(e.type=i,e)}}});i.exports=u}),define("arale-autocomplete/1.4.1/src/autocomplete.handlebars",["handlebars-runtime/1.3.0/dist/cjs/handlebars.runtime"],function(e,t,i){var a=e("handlebars-runtime/1.3.0/dist/cjs/handlebars.runtime")["default"];i.exports=a.template(function(e,t,i,a,s){function n(e,t,a){var s,n,l,h="";return h+='\n      <li data-role="item" class="'+d((s=a&&a.classPrefix,typeof s===c?s.apply(e):s))+'-item">\n        ',n=i.include||a&&a.include,l={hash:{parent:a},inverse:u.noop,fn:u.program(2,r,t),data:t},s=n?n.call(e,l):f.call(e,"include",l),(s||0===s)&&(h+=s),h+="\n      </li>\n    "}function r(e,t){var s;return s=u.invokePartial(a.html,"html",e,i,a,t),s||0===s?s:""}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=this.merge(a,e.partials),s=s||{};var l,h,o="",u=this,c="function",d=this.escapeExpression,f=i.helperMissing;return o+='<div class="',(h=i.classPrefix)?l=h.call(t,{hash:{},data:s}):(h=t&&t.classPrefix,l=typeof h===c?h.call(t,{hash:{},data:s}):h),o+=d(l)+'">\n  <div class="',(h=i.classPrefix)?l=h.call(t,{hash:{},data:s}):(h=t&&t.classPrefix,l=typeof h===c?h.call(t,{hash:{},data:s}):h),o+=d(l)+'-content">\n    ',l=u.invokePartial(a.header,"header",t,i,a,s),(l||0===l)&&(o+=l),o+='\n    <ul data-role="items">\n    ',l=i.each.call(t,t&&t.items,{hash:{},inverse:u.noop,fn:u.programWithDepth(1,n,s,t),data:s}),(l||0===l)&&(o+=l),o+="\n    </ul>\n    ",l=u.invokePartial(a.footer,"footer",t,i,a,s),(l||0===l)&&(o+=l),o+="\n  </div>\n</div>\n"})});